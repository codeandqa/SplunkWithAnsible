language: ruby

services:
  - docker

before_install:
  - docker build -t carlad/sinatra .
  - docker run -d -p 127.0.0.1:80:4567 carlad/sinatra /bin/sh -c "cd /root/sinatra; bundle exec foreman start;"
  - docker ps -a
  - docker run carlad/sinatra /bin/sh -c "cd /root/sinatra; bundle exec rake test"

script:
  - bundle exec rake test

  
# language: python
# python: '2.7'
# sudo: required
# env:
#   #matrix:
#   # - OS_TYPE=centos OS_VERSION=6 ANSIBLE_VERSION=1.9.2
#   - OS_TYPE=centos OS_VERSION=7 ANSIBLE_VERSION=1.9.2
#   # - OS_TYPE=ubuntu OS_VERSION=12.04 ANSIBLE_VERSION=1.9.2
#   # - OS_TYPE=ubuntu OS_VERSION=14.04 ANSIBLE_VERSION=1.9.2
# #  - OS_TYPE=fedora OS_VERSION=22

# branches:
#   only:
#   - Testing
# #  - stable

# services:
#   - docker

# before_install:
#   - docker pull weldpua2008/docker-ansible:${OS_TYPE}${OS_VERSION}_v${ANSIBLE_VERSION}

# script:
#  # Run tests in Container
# #  - docker run --rm=true -v `pwd`:/SplunkWithAnsible/AnsibleSetup/roles:rw weldpua2008/docker-ansible:${OS_TYPE}${OS_VERSION}_v${ANSIBLE_VERSION} /bin/bash -c "Splunk/tests/test-in-docker-image.sh ${OS_TYPE} ${OS_VERSION} ${ANSIBLE_VERSION}"
#  - docker exec -it weldpua2008/docker-ansible:${OS_TYPE}${OS_VERSION}_v${ANSIBLE_VERSION} touch /tmp/execWorks
# # 